<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>è‡ªå»ºèŒ§æˆ¿ | TrendRadar</title>
<link rel="icon" href="./img/trend-icon.png" />
<meta name="description" content="è‡ªå»ºèŒ§æˆ¿ Â· è¶‹åŠ¿æ´å¯Ÿé¢æ¿" />
<style>
  :root{
    --bg:#0b1018; --panel:#0f1622; --text:#e6edf6; --sub:#94a3b8;
    --brand:#7aa2ff; --line:#253041; --chip:#162238; --chipText:#cbd5e1;
  }
  .light{
    --bg:#f5f7fb; --panel:#ffffff; --text:#0f172a; --sub:#6b7280;
    --brand:#2563eb; --line:#e5e7eb; --chip:#eff4fb; --chipText:#1f2937;
  }
  *{box-sizing:border-box}
  html,body{margin:0;height:100%}
  body{
    background:var(--bg); color:var(--text);
    font-family:-apple-system,BlinkMacSystemFont,"PingFang SC","Microsoft YaHei","Inter",sans-serif;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    overflow-x:hidden;
  }

  /* èƒŒæ™¯å›ºå®šå¯è§ */
  .hero-bg{
    position:fixed; top:0; left:0; width:100%; height:300px;
    background:url('https://picx.zhimg.com/v2-53929aa63157aa2c5ff6fb2ecc22094b_r.jpg') center/cover no-repeat;
    z-index:-2;
  }
  .hero-overlay{
    position:fixed; top:0; left:0; width:100%; height:300px;
    background:linear-gradient(180deg, rgba(0,0,0,.25) 0%, rgba(0,0,0,.5) 60%, rgba(0,0,0,0) 100%);
    z-index:-1;
  }

  /* é¡¶éƒ¨æ¡ï¼šå»æ‰å›¾æ ‡ï¼Œåªä¿ç•™æ–‡å­— */
  .topbar{
    position:fixed; top:0; left:0; right:0;
    height:56px; display:flex; align-items:center; justify-content:space-between;
    padding:0 18px; color:#fff; z-index:20;
    background:linear-gradient(180deg, rgba(8,12,20,.55), rgba(8,12,20,.1) 70%, transparent);
    backdrop-filter:blur(6px);
  }
  .brand{font-weight:800}

  .btn{
    border:1px solid rgba(255,255,255,.15); background:transparent; color:#fff;
    padding:6px 10px; border-radius:10px; cursor:pointer; font-size:.9rem;
  }
  .btn:hover{background:rgba(255,255,255,.1)}

  /* ä¸­é—´æ ‡è¯­ï¼šé™ä½å±‚çº§ï¼Œä¸é®ç›–å†…å®¹ */
  .hero-title{
    position:fixed; top:120px; left:50%; transform:translateX(-50%);
    text-align:center; color:#fff;
    z-index:1;                /* å†…å®¹å°†ç›–åœ¨å…¶ä¸Š */
    pointer-events:none;      /* ä¸æ‹¦æˆªç‚¹å‡»/æ»šåŠ¨ */
  }
  .hero-title h1{margin:0;font-size:26px;font-weight:800;}
  .hero-title p{margin-top:6px;font-size:.95rem;color:#d1d5db;}

  /* å†…å®¹åŒºåœ¨ä¸Šå±‚ */
  main{
    position:relative; z-index:2;  /* é«˜äºæ ‡è¯­ */
    margin-top:320px; padding:0 22px 40px; max-width:1200px; margin-left:auto; margin-right:auto;
  }
  .grid{display:grid;grid-template-columns:2.1fr 1fr;gap:18px}

  .card{
    background:var(--panel);border:1px solid var(--line);
    border-radius:14px;box-shadow:0 8px 20px rgba(0,0,0,.22);overflow:hidden;
  }
  .card-hd{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid var(--line)}
  .card-hd h3{margin:0;font-size:16px;font-weight:800;color:var(--brand)}
  .card-bd{padding:10px 12px 12px}
  .news-item{padding:12px 8px;border-bottom:1px solid var(--line);display:flex;flex-direction:column;gap:6px}
  .news-item:last-child{border-bottom:none}
  .news-title{margin:0;font-size:15px;line-height:1.45}
  .meta{display:flex;gap:10px;flex-wrap:wrap;color:var(--sub);font-size:.88rem}
  .badge{background:var(--chip);color:var(--chipText);border:1px solid var(--line);
         border-radius:999px;padding:2px 8px;font-size:.8rem}
  .chips{display:flex;flex-wrap:wrap;gap:10px}
  .chip{background:var(--chip);border:1px solid var(--line);color:var(--chipText);
        padding:8px 12px;border-radius:999px;font-size:.92rem}
  .chip:hover{background:#1a2a44}
  .footer{text-align:center;padding:28px 12px;color:var(--sub);font-size:.9rem}

  @media(max-width:980px){
    .grid{grid-template-columns:1fr}
    .hero-title{top:90px}
  }
</style>
</head>
<body>
  <div class="hero-bg"></div>
  <div class="hero-overlay"></div>

  <header class="topbar">
    <div class="brand">è‡ªå»ºèŒ§æˆ¿ | TrendRadar</div>
    <div>
      <span id="uptime">æ›´æ–°ä¸­â€¦</span>
      <button class="btn" id="themeBtn">åˆ‡æ¢ä¸»é¢˜</button>
    </div>
  </header>

  <div class="hero-title">
    <h1>è‡ªå»ºèŒ§æˆ¿ Â· è¶‹åŠ¿æ´å¯Ÿé¢æ¿</h1>
    <p>æ²‰æ·€æ€è€ƒ Â· å®ˆæŠ¤ä¸“æ³¨ Â· è‡ªåŠ¨è¿½è¸ªå…¨çƒä¿¡æ¯è„‰ç»œ</p>
  </div>

  <main>
    <div class="grid">
      <section class="card">
        <div class="card-hd"><h3>ğŸ“Œ ä»Šæ—¥é‡ç‚¹è¶‹åŠ¿</h3></div>
        <div class="card-bd" id="newsList">
          <div class="news-item"><p class="news-title">åŠ è½½ä¸­â€¦</p><div class="meta"><span>æ¥æºï¼šâ€”</span></div></div>
        </div>
      </section>

      <aside class="card">
        <div class="card-hd"><h3>ğŸ”¥ çƒ­æœå…³é”®è¯</h3></div>
        <div class="card-bd"><div class="chips" id="kwChips"><span class="chip">åŠ è½½ä¸­â€¦</span></div></div>
      </aside>
    </div>
  </main>

  <footer class="footer">
    Â© 2025 è‡ªå»ºèŒ§æˆ¿ | æ•°æ®æºï¼šåå°”è¡—è§é—» Â· æ–°æµªè´¢ç» Â· ç™¾åº¦æŒ‡æ•°
  </footer>

<script>
  const KEY="tr-theme",btn=document.getElementById("themeBtn");
  const apply=t=>{t==="light"?document.documentElement.classList.add("light"):document.documentElement.classList.remove("light")};
  apply(localStorage.getItem(KEY)||"dark");
  btn.onclick=()=>{const n=document.documentElement.classList.contains("light")?"dark":"light";apply(n);localStorage.setItem(KEY,n)}

  const newsEl=document.getElementById("newsList"),kwEl=document.getElementById("kwChips"),upEl=document.getElementById("uptime");
  const URL="/TrendRadar/api/trends.json";

  async function j(u){try{const r=await fetch(u,{cache:"no-store"});if(!r.ok)throw 0;return await r.json()}catch{return null}}
  function uniq(a,f){const m=new Map();a.forEach(x=>{const k=f(x);if(!m.has(k))m.set(k,x)});return[...m.values()]}
  function empty(){
    newsEl.innerHTML=`<div class="news-item"><p class="news-title">æš‚æ— æ•°æ®</p><div class="meta"><span>æ£€æŸ¥ /api/trends.json</span></div></div>`;
    kwEl.innerHTML=`<span class="chip">æš‚æ— å…³é”®è¯</span>`;
  }
  function render(d){
    const t=d.generated_at?new Date(d.generated_at):new Date();
    upEl.textContent="æ›´æ–°äº "+t.toLocaleString("zh-CN",{hour12:false});
    let items=[];(d.trends||[]).forEach(g=>(g.titles||[]).forEach(t=>{
      items.push({k:g.keyword_group||"",title:t.title||"",url:t.url||"",src:t.source||"",cnt:t.appearance_count||""})
    }));
    items=uniq(items,x=>x.title).slice(0,30);
    if(!items.length){empty();return;}
    newsEl.innerHTML=items.map(n=>`<div class="news-item">
      <p class="news-title"><a href="${n.url}" target="_blank" rel="noopener" style="color:inherit;text-decoration:none">${n.title.replace(/</g,"&lt;")}</a></p>
      <div class="meta"><span>æ¥æºï¼š${n.src||"æœªçŸ¥"}</span>${n.cnt?`<span>å‡ºç°ï¼š${n.cnt}æ¬¡</span>`:""}${n.k?`<span class="badge">${n.k}</span>`:""}</div>
    </div>`).join("");
    const kws=uniq((d.trends||[]).map(g=>g.keyword_group).filter(Boolean),x=>x);
    kwEl.innerHTML=kws.length?kws.slice(0,24).map(k=>`<span class="chip">${k}</span>`).join(""):`<span class="chip">æš‚æ— å…³é”®è¯</span>`;
  }
  (async()=>{const d=await j(URL);if(!d){empty();return;}render(d)})();
</script>
</body>
</html>
